---
- name: Write SSH config
  delegate_to: localhost
  delegate_facts: no
  become: false
  blockinfile:
    block: "{{ lookup('template', 'ssh-config.j2') }}"
    file: "~/.ssh/config"
    create: yes
    mark: "# {mark} BBOT EC2 INSTANCE"

- name: Generate output document
  delegate_to: localhost
  delegate_facts: no
  become: false
  vars:
    tf: "{{ playbook_dir }}/tf/"
  template:
    src: "readme.j2"
    dest: "{{ playbook_dir }}/{{ output_file }}"

- name: Provisioned successfully
  delegate_to: localhost
  delegate_facts: no
  vars:
    extra_lines: "This information can also be found in {{ playbook_dir }}/{{ output_file }}"
    raw_lines: "{{ lookup('file', '{{ playbook_dir }}/{{ output_file }}') }}\n\n{{ extra_lines }}"
    padded_lines: |
      {% for line in raw_lines.split('\n') %}
      {{ "{:<80}".format(line) }}
      {% endfor %}
  debug:
    msg: "{{ padded_lines.split('\n') }}"
